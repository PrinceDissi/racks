/**
* Racks is a project of Jan Biasi, inspired by
* Google's (c) project called Polymer. It's an
* implementation of the modern WebComponents and
* Shadow DOM technologs. Licensed 2015 under the
* MIT Licese, all rights reserved.
*/
!function(e){function t(){Error.call(this);var e=arguments,t=Array.prototype.shift.call(e),r=t.replace(/{(\d+)}/g,function(t,r){return"_undefined"!=typeof e[r]?e[r]:t});"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=r||"Internal racks error.",this.type=this.constructor.name,this.name="RacksError"}function r(e){var t=e;return t=t.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,""),t=t.replace(/ {2,}/g," "),t=t.replace(/ ([{:}]) /g,"$1"),t=t.replace(/([;,]) /g,"$1"),t=t.replace(/ !/g,"!")}function n(e,t){var r=Object.create(HTMLElement.prototype);this.handlers={created:function(){var e=this.createShadowRoot(),r=this.tagName.toLowerCase(),n=document.createElement("div"),a=document.createElement("style");a.innerHTML=c.factory[r].style,n.innerHTML=c.factory[r].content,e.appendChild(a),e.appendChild(n),(t.created||o)(this)},attached:function(){(t.attached||o)(this)},detached:function(){(t.detached||o)(this)},attributeChanged:function(){(t.attributeChanged||o)(this)}};var n=i(r,d(this.handlers));this.name=e,this.constructor=f(this.name,n)}function a(){if(e.Rack&&e.Rack.Root)throw new t("Root for Rack already exists in $application");var r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var e=this.getAttribute("name"),r=this.getElementsByTagName("template");if(r.length<=0)throw new t("No templates found in {0}",e);var n=this.getElementsByTagName("style");l(e,r[0],n[0],this)},s("racks-element")||(e.racks.registered.push("racks-element"),document.registerElement("racks-element",{prototype:r}))}var o=function(){},c={factory:{},elements:{},registered:[],create:{root:function(){return new a}}};t.prototype=Object.create(Error.prototype),t.prototype.constructor=t;var i=function(e,t){var r;for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},s=function(t){return e.racks.registered.indexOf(t)>=0},u=function(e){return["attached","detached","created","attributeChanged"].indexOf(e)>-1},d=function(e){if(e&&"_undefined"!=e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(u(t)?r[t+"Callback"]=e[t]:console.info("Racks: Used _undefined racks event "+t));return r}},f=function(t,r){return s(t)?void 0:(e.racks.registered.push(t),document.registerElement(t,{prototype:r}))},h=function(e,t){t=t||{},c.elements[e]=new n(e,t)},l=function(e,t,n,a){c.factory[e]&&console.warn("Factory for "+e+" already defined");var n=n.innerHTML.trim();c.factory[e]={_id:e,content:t.innerHTML.trim(),style:r(n),attributes:a.getAttribute("attributes")||[]}};e.Racks=h,e.racks=c,e.Racks.Root=c.create.root()}(window);
